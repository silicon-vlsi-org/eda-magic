%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: tut9.dvi
%%Pages: 6
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Italic Times-Roman
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSCommandLine: dvips tut9.dvi -o tut9.ps
%DVIPSParameters: dpi=600, comments removed
%DVIPSSource:  TeX output 2001.09.26:1352
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Bold
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (tut9.dvi)
@start /Fa 134[50 1[72 50 55 33 39 44 1[55 50 55 83 28
2[28 1[50 33 44 55 44 55 50 12[66 3[61 12[72 5[57 2[33
50 4[50 2[50 50 1[25 33 3[33 33 36[55 55 2[{
 TeXBase1Encoding ReEncodeFont }35 100.000003 /Times-Bold
rf /Fb 138[66 40 47 53 2[60 66 100 33 2[33 66 2[53 66
53 1[60 12[80 6[113 9[86 8[40 55[66 2[{ TeXBase1Encoding ReEncodeFont }
19 119.999948 /Times-Bold rf /Fc 105[50 1[44 44 24[44
50 50 72 50 50 28 39 33 50 50 50 50 78 28 50 28 28 50
50 33 44 50 44 50 44 7[72 1[94 1[72 61 55 66 1[55 72
1[89 61 2[33 72 72 55 61 72 66 66 72 5[28 28 50 1[50
50 50 50 50 50 50 50 28 25 33 25 2[33 33 33 2[50 50 31[55
55 2[{ TeXBase1Encoding ReEncodeFont }70 100.000003 /Times-Roman
rf /Fd 134[44 44 66 1[50 28 39 39 1[50 50 50 72 28 3[50
2[44 50 1[50 50 11[72 1[50 3[72 66 3[44 27[25 1[25 2[33
33 37[50 2[{ TeXBase1Encoding ReEncodeFont }27 100.000003
/Times-Italic rf /Fe 134[72 1[104 72 80 48 56 64 2[72
80 120 40 2[40 80 72 48 64 80 64 80 72 9[143 2[96 80
104 1[88 112 104 135 3[56 1[112 88 2[104 96 7[48 72 3[72
72 72 72 72 3[48 9[72 35[{ TeXBase1Encoding ReEncodeFont }42
143.999997 /Times-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: Letter

%%EndSetup
%%Page: 1 1
1 0 bop 158 101 a Fe(Magic)36 b(T)-13 b(utorial)34 b(#9:)43
b(F)l(ormat)35 b(Con)-6 b(v)o(ersion)33 b(f)l(or)i(CIF)g(and)g(Calma)
1618 521 y Fd(J)n(ohn)24 b(Ousterhout)1401 941 y Fc(Computer)g(Science)
i(Di)n(vision)1020 1062 y(Electrical)f(Engineering)f(and)h(Computer)f
(Sciences)1473 1182 y(Uni)n(v)o(ersity)f(of)i(California)1544
1303 y(Berk)o(ele)o(y)-6 b(,)24 b(CA)h(94720)1448 1573
y Fd(\(Updated)f(by)h(other)o(s,)f(too.\))1053 1843 y
Fc(This)g(tutorial)g(corresponds)g(to)g(Magic)h(v)o(ersion)e(7.)0
2336 y Fb(T)-11 b(utorials)30 b(to)f(r)n(ead)h(\002rst:)300
2513 y Fc(Magic)24 b(T)l(utorial)g(#1:)30 b(Getting)24
b(Started)300 2633 y(Magic)g(T)l(utorial)g(#2:)30 b(Basic)25
b(P)o(ainting)f(and)h(Selection)300 2754 y(Magic)f(T)l(utorial)g(#4:)30
b(Cell)25 b(Hierarchies)0 2930 y Fb(Commands)k(intr)n(oduced)j(in)f
(this)f(tutorial:)300 3107 y Fc(:calma,)24 b(:cif)0 3284
y Fb(Macr)n(os)29 b(intr)n(oduced)i(in)g(this)f(tutorial:)300
3477 y Fd(\(None\))0 4334 y Fe(1)143 b(Basics)0 4557
y Fc(CIF)33 b(\(Caltech)f(Intermediate)f(F)o(orm\))g(and)g(Calma)h
(Stream)f(F)o(ormat)g(are)h(standard)f(layout)g(description)f(lan-)0
4678 y(guages)g(used)g(to)g(transfer)h(mask-le)n(v)o(el)e(layouts)g
(between)i(or)n(ganizations)e(and)h(design)g(tools.)46
b(This)30 b(tutorial)0 4798 y(describes)22 b(ho)n(w)f(Magic)h(can)h(be)
f(used)g(to)g(read)h(and)f(write)g(\002les)g(in)g(CIF)i(and)e(Stream)g
(formats.)30 b(The)22 b(v)o(ersion)f(of)0 4918 y(CIF)26
b(that)e(Magic)h(supports)f(is)g(CIF)i(2.0;)f(it)f(is)g(the)h(most)f
(popular)g(layout)g(language)h(in)g(the)f(uni)n(v)o(ersity)f(design)0
5039 y(community)-6 b(.)40 b(The)29 b(Calma)g(format)g(that)f(Magic)h
(supports)e(is)i(GDS)g(II)g(Stream)h(format,)f(v)o(ersion)f(3.0,)h
(corre-)0 5159 y(sponding)21 b(to)h(GDS)h(II)g(Release)g(5.1.)30
b(This)22 b(is)g(probably)g(the)g(most)f(popular)h(layout)g
(description)g(language)g(for)0 5280 y(the)j(industrial)e(design)h
(community)-6 b(.)146 5400 y(T)e(o)25 b(write)g(out)f(a)h(CIF)h
(\002le,)f(place)g(the)g(cursor)g(o)o(v)o(er)f(a)h(layout)f(windo)n(w)f
(and)i(type)f(the)h(command)1875 5649 y(\2261\226)p eop
%%Page: 2 2
2 1 bop 0 -180 a Fc(September)25 b(26,)f(2001)781 b(Magic)24
b(T)l(utorial)g(#9:)30 b(F)o(ormat)24 b(Con)l(v)o(ersion)g(for)h(CIF)h
(and)f(Calma)900 84 y Fa(:cif)146 289 y Fc(This)31 b(will)g(generate)i
(a)f(CIF)h(\002le)f(called)g Fd(name)p Fa(.cif)p Fc(,)i(where)e
Fd(name)g Fc(is)f(the)h(name)g(of)g(the)f(root)h(cell)g(in)f(the)0
409 y(windo)n(w)-6 b(.)32 b(The)26 b(CIF)h(\002le)g(will)e(contain)g(a)
i(description)d(of)i(the)g(entire)g(cell)g(hierarchy)g(in)f(that)h
(windo)n(w)-6 b(.)32 b(If)27 b(you)0 530 y(wish)d(to)h(use)f(a)h(name)g
(dif)n(ferent)f(from)h(the)g(root)f(cell,)h(type)f(the)h(command)900
735 y Fa(:cif)g(write)g Fd(\002le)146 939 y Fc(This)j(will)g(store)h
(the)g(CIF)h(in)e Fd(\002le)p Fa(.cif)p Fc(.)43 b(Start)29
b(Magic)g(up)f(to)h(edit)f Fa(tut9a)h Fc(and)g(generate)h(CIF)g(for)f
(that)f(cell.)0 1060 y(The)23 b(CIF)h(\002le)f(will)f(be)h(in)f(ASCII)i
(format,)f(so)f(you)h(can)g(use)f(Unix)h(commands)e(lik)o(e)h
Fa(mor)n(e)i Fc(and)e Fa(vi)h Fc(to)f(see)h(what)0 1180
y(it)h(contains.)146 1301 y(T)-8 b(o)25 b(read)g(a)g(CIF)h(\002le)g
(into)e(Magic,)g(place)h(the)g(cursor)g(o)o(v)o(er)e(a)j(layout)e
(windo)n(w)f(and)i(type)f(the)h(command)900 1505 y Fa(:cif)g(r)n(ead)h
Fd(\002le)146 1710 y Fc(This)38 b(will)f(read)i(the)f(\002le)g
Fd(\002le)p Fa(.cif)h Fc(\(which)e(must)h(be)g(in)g(CIF)h(format\),)i
(generate)e(Magic)f(cells)g(for)g(the)0 1831 y(hierarchy)d(described)g
(in)g(the)g(\002le,)j(mak)o(e)d(the)g(entire)g(hierarchy)g(a)g(subcell)
g(of)g(the)g(edit)g(cell,)i(and)e(run)g(the)0 1951 y(design-rule)18
b(check)o(er)i(to)f(v)o(erify)f(e)n(v)o(erything)g(read)h(from)g(the)g
(\002le.)29 b(Information)18 b(in)h(the)g(top-le)n(v)o(el)e(cell)i
(\(usually)0 2071 y(just)25 b(a)i(call)f(on)h(the)f(\223main\224)g
(cell)g(of)h(the)f(layout\))g(will)f(be)i(placed)f(into)f(the)i(edit)f
(cell.)35 b(Start)27 b(Magic)f(up)g(afresh)0 2192 y(and)35
b(read)g(in)f Fa(tut9a.cif)p Fc(,)k(which)c(you)h(created)g(abo)o(v)o
(e.)60 b(It)34 b(will)g(be)h(easier)g(if)g(you)f(al)o(w)o(ays)h(read)g
(CIF)h(when)0 2312 y(Magic)23 b(has)h(just)f(been)h(started)g(up:)29
b(if)24 b(some)f(of)h(the)g(cells)g(already)g(e)o(xist,)f(the)g(CIF)i
(reader)g(will)e(not)g(o)o(v)o(erwrite)0 2432 y(them,)h(b)n(ut)g(will)g
(instead)g(use)h(numbers)f(for)h(cell)g(names.)146 2553
y(T)-8 b(o)34 b(read)h(and)f(write)g(Stream-format)g(\002les,)i(use)e
(the)g(commands)f Fa(:calma)h(r)n(ead)h Fc(and)f Fa(:calma)p
Fc(,)i(respec-)0 2673 y(ti)n(v)o(ely)-6 b(.)43 b(These)30
b(commands)f(ha)n(v)o(e)g(the)h(same)g(ef)n(fect)g(as)g(the)g(CIF)h
(commands,)e(e)o(xcept)h(that)f(the)o(y)g(operate)h(on)0
2794 y(\002les)24 b(with)g Fa(.strm)g Fc(e)o(xtensions.)29
b(Stream)24 b(is)g(a)h(binary)f(format,)g(so)f(you)h(can')n(t)h(e)o
(xamine)e Fa(.strm)i Fc(\002les)f(with)g(a)g(te)o(xt)0
2914 y(editor)-5 b(.)146 3034 y(Stream)38 b(\002les)g(do)f(not)g
(identify)g(a)g(top-le)n(v)o(el)f(cell,)41 b(so)c(you)g(w)o(on')n(t)g
(see)h(an)o(ything)e(on)h(the)g(screen)h(after)0 3155
y(you')-5 b(v)o(e)24 b(used)g(the)g Fa(:calma)g(r)n(ead)i
Fc(command.)j(Y)-11 b(ou')o(ll)24 b(ha)n(v)o(e)g(to)g(use)h(the)f
Fa(:load)g Fc(command)g(to)g(look)g(at)g(the)g(cells)0
3275 y(you)d(read.)30 b(Ho)n(we)n(v)o(er)l(,)21 b(if)h(Magic)f(w)o(as)h
(used)f(to)g(write)h(the)f(Calma)h(\002le)g(being)f(read,)i(the)e
(library)h(name)f(reported)0 3396 y(by)k(the)f Fa(:calma)h(r)n(ead)h
Fc(command)d(is)i(the)f(same)h(as)g(the)g(name)f(of)h(the)g(root)f
(cell)h(for)g(that)f(library)-6 b(.)146 3516 y(Also,)43
b(Calma)d(format)f(places)h(some)f(limitations)e(on)i(the)h(names)f(of)
h(cells:)60 b(the)o(y)39 b(can)h(only)f(contain)0 3636
y(alphanumeric)24 b(characters,)h(\223$\224,)g(and)g(\223)p
1427 3636 30 4 v 36 w(\224,)g(and)f(can)h(be)g(at)g(most)e(32)h
(characters)i(long.)k(If)25 b(the)f(name)h(of)f(a)h(cell)0
3757 y(does)c(not)g(meet)g(these)h(limitations,)d Fa(:calma)j(write)g
Fc(con)l(v)o(erts)e(it)h(to)g(a)h(unique)f(name)g(of)h(the)f(form)p
3410 3757 150 5 v 172 w Fd(n)p Fc(,)h(where)0 3877 y
Fd(n)29 b Fc(is)f(a)h(small)f(inte)o(ger)-5 b(.)41 b(T)-8
b(o)29 b(a)n(v)n(oid)f(an)o(y)g(possible)f(con\003icts,)j(you)e(should)
g(a)n(v)n(oid)g(using)g(names)g(lik)o(e)g(these)h(for)0
3997 y(your)c(o)n(wn)e(cells.)146 4118 y(Y)-11 b(ou)27
b(shouldn')n(t)e(need)i(to)g(kno)n(w)e(much)i(more)f(than)h(what')-5
b(s)26 b(abo)o(v)o(e)g(in)g(order)h(to)g(read)g(and)g(write)f(CIF)i
(and)0 4238 y(Stream.)i(The)21 b(sections)f(belo)n(w)g(describe)i(the)e
(dif)n(ferent)h(styles)f(of)i(CIF/Calma)g(that)e(Magic)h(can)g
(generate)h(and)0 4359 y(the)31 b(limitations)e(of)j(the)f(CIF/Calma)h
(f)o(acilities)f(\(you)g(may)g(ha)n(v)o(e)h(noticed)e(that)h(when)h
(you)f(wrote)g(and)h(read)0 4479 y(CIF)24 b(abo)o(v)o(e)e(you)h(didn')n
(t)f(quite)h(get)g(back)g(what)g(you)f(started)h(with;)g(Section)g(3)g
(describes)f(the)h(dif)n(ferences)h(that)0 4599 y(can)k(occur\).)40
b(Although)26 b(the)h(discussion)f(mentions)g(only)h(CIF)-8
b(,)28 b(the)g(same)f(features)h(and)g(problems)e(apply)h(to)0
4720 y(Calma.)0 5056 y Fe(2)143 b(Styles)0 5280 y Fc(Magic)28
b(usually)f(kno)n(ws)g(se)n(v)o(eral)g(dif)n(ferent)h(w)o(ays)g(to)g
(generate)g(CIF/Calma)i(from)e(a)g(gi)n(v)o(en)f(layout.)40
b(Each)28 b(of)0 5400 y(these)h(w)o(ays)g(is)f(called)h(a)g
Fd(style)p Fc(.)43 b(Dif)n(ferent)29 b(styles)f(can)h(be)g(used)g(to)f
(handle)h(dif)n(ferent)f(f)o(abrication)h(f)o(acilities,)1875
5649 y(\2262\226)p eop
%%Page: 3 3
3 2 bop 0 -180 a Fc(Magic)24 b(T)l(utorial)g(#9:)30 b(F)o(ormat)24
b(Con)l(v)o(ersion)g(for)h(CIF)h(and)f(Calma)781 b(September)25
b(26,)g(2001)0 68 y(which)f(may)g(dif)n(fer)g(in)g(the)g(names)g(the)o
(y)g(use)g(for)h(layers)f(or)g(in)g(the)g(e)o(xact)h(mask)e(set)i
(required)f(for)h(f)o(abrication.)0 188 y(Dif)n(ferent)34
b(styles)f(can)h(be)h(also)e(used)h(to)g(write)g(out)f(CIF/Calma)i
(with)f(slightly)e(dif)n(ferent)h(feature)i(sizes)f(or)0
309 y(design)24 b(rules.)31 b(CIF/Calma)26 b(styles)e(are)i(described)f
(in)g(the)f(technology)g(\002le)i(that)e(Magic)h(reads)g(when)g(it)g
(starts)0 429 y(up;)d(the)g(e)o(xact)g(number)g(and)g(nature)g(of)g
(the)g(styles)f(is)h(determined)f(by)h(whoe)n(v)o(er)f(wrote)h(your)g
(technology)f(\002le.)0 549 y(There)h(are)h(separate)f(styles)e(for)i
(reading)g(and)g(writing)e(CIF/Calma;)k(at)d(an)o(y)g(gi)n(v)o(en)g
(time,)g(there)h(is)f(one)h(current)0 670 y(input)i(style)g(and)h(one)f
(current)h(output)f(style.)146 790 y(The)f(standard)g(SCMOS)h
(technology)d(\002le)j(pro)o(vides)d(an)i(e)o(xample)f(of)h(ho)n(w)g
(dif)n(ferent)f(styles)g(can)h(be)g(used.)0 911 y(Start)i(up)g(Magic)f
(with)g(the)h(SCMOS)g(technology)f(\()p Fa(magic)h(-Tscmos)p
Fc(\).)31 b(Then)24 b(type)h(the)g(commands)900 1082
y Fa(:cif)g(ostyle)900 1202 y(:cif)g(istyle)146 1373
y Fc(The)e(\002rst)g(command)f(will)f(print)i(out)f(a)h(list)e(of)i
(all)g(the)f(styles)g(in)g(which)h(Magic)f(can)h(write)g(CIF/Calma)g
(\(in)0 1493 y(this)18 b(technology\))g(and)i(the)f(second)f(command)h
(prints)f(out)g(the)h(styles)g(in)f(which)h(Magic)g(can)h(read)f
(CIF/Calma.)0 1614 y(Y)-11 b(ou)31 b(use)g(the)h Fa(:cif)f
Fc(command)g(to)g(change)g(the)g(current)h(styles,)g(b)n(ut)f(the)g
(styles)f(are)i(used)f(for)h(both)f(CIF)h(and)0 1734
y(Calma)h(format)f(con)l(v)o(ersion.)53 b(The)33 b(SCMOS)g(technology)e
(\002le)i(pro)o(vides)f(se)n(v)o(eral)g(output)f(styles.)53
b(The)33 b(ini-)0 1854 y(tial)d(\(def)o(ault\))h(style)e(for)i(writing)
f(CIF)h(is)f Fa(lambda=1.0\(gen\))p Fc(.)49 b(This)29
b(style)h(generates)h(mask)f(layers)g(for)h(the)0 1975
y(MOSIS)h(scalable)g(CMOS)h(process,)g(where)f(each)h(Magic)f(unit)f
(corresponds)g(to)g(1)h(micron)f(and)h(both)f(well)0
2095 y(polarities)21 b(are)h(generated.)30 b(See)23 b(the)e(technology)
g(manual)g(for)h(more)g(information)e(on)i(the)f(v)n(arious)g(styles)g
(that)0 2216 y(are)26 b(a)n(v)n(ailable.)k(Y)-11 b(ou)24
b(can)h(change)g(the)g(output)e(style)i(with)f(the)g(command)900
2386 y Fa(:cif)h(ostyle)g Fd(ne)o(wStyle)146 2557 y Fc(where)30
b Fd(ne)o(wStyle)f Fc(is)g(the)g(ne)n(w)f(style)h(you')-5
b(d)28 b(lik)o(e)h(to)g(use)g(for)g(output.)43 b(After)29
b(this)f(command,)h(an)o(y)g(future)0 2678 y(CIF)g(or)g(Calma)f
(\002les)h(will)e(be)i(generated)f(with)g(the)g(ne)n(w)g(style.)40
b(The)29 b Fa(:cif)f(istyle)g Fc(command)f(can)i(be)f(used)g(in)0
2798 y(the)d(same)f(w)o(ay)h(to)g(see)g(the)f(a)n(v)n(ailable)g(styles)
g(for)h(reading)g(CIF)h(and)f(to)f(change)h(the)g(current)g(style.)146
2919 y(Each)d(style)e(has)h(a)h(speci\002c)g(scalef)o(actor;)g(you)f
(can')n(t)h(use)f(a)h(particular)f(style)f(with)h(a)g(dif)n(ferent)g
(scalef)o(actor)-5 b(.)0 3039 y(T)d(o)35 b(change)h(the)f(scalef)o
(actor)l(,)k(you')o(ll)34 b(ha)n(v)o(e)i(to)f(edit)g(the)g(appropriate)
g(style)g(in)g(the)g Fa(ci\002nput)j Fc(or)d Fa(cif)n(output)0
3159 y Fc(section)28 b(of)h(the)f(technology)g(\002le.)43
b(This)28 b(process)h(is)f(described)g(in)h(\223Magic)f(Maintainer')-5
b(s)28 b(Manual)g(#2:)38 b(The)0 3280 y(T)-7 b(echnology)24
b(File.)-7 b(\224)0 3612 y Fe(3)143 b(Rounding)0 3835
y Fc(The)27 b(units)e(used)i(for)g(coordinates)f(in)g(Magic)g(are)i
(generally)e(dif)n(ferent)h(from)f(those)g(in)g(CIF)i(\002les.)37
b(In)27 b(Magic,)0 3955 y(most)h(technology)h(\002les)h(use)f
(lambda-based)g(units,)g(where)h(one)g(unit)f(is)g(typically)f(half)i
(the)f(minimum)e(fea-)0 4076 y(ture)d(size.)31 b(In)25
b(CIF)g(\002les,)g(the)f(units)f(are)j(centimicrons)d(\(hundredths)g
(of)i(a)g(micron\).)30 b(When)24 b(reading)h(CIF)g(and)0
4196 y(Calma)h(\002les,)h(an)f(inte)o(ger)f(scalef)o(actor)i(is)e(used)
h(to)g(con)l(v)o(ert)f(from)h(centimicrons)f(to)h(Magic)f(units.)34
b(If)26 b(the)g(CIF)0 4317 y(\002le)h(contains)f(coordinates)g(that)h
(don')n(t)f(scale)h(e)o(xactly)f(to)h(inte)o(ger)f(Magic)g(units,)g
(Magic)h(rounds)f(the)g(coordi-)0 4437 y(nates)31 b(up)g(or)g(do)n(wn)g
(to)g(the)g(closest)f(inte)o(ger)h(Magic)g(units.)49
b(A)31 b(CIF)h(coordinate)f(e)o(xactly)g(halfw)o(ay)g(between)0
4557 y(tw)o(o)21 b(Magic)g(units)f(is)h(rounded)g(do)n(wn.)29
b(The)21 b(\002nal)h(authority)e(on)h(rounding)f(is)h(the)g(procedure)h
(CIFScaleCoord)0 4678 y(in)g(the)g(\002le)h(cif/CIFreadutils.c)f(When)g
(rounding)f(occurs,)i(the)f(resulting)f(Magic)h(\002le)h(will)e(not)h
(match)g(the)g(CIF)0 4798 y(\002le)j(e)o(xactly)-6 b(.)146
4918 y(T)f(echnology)30 b(\002les)h(usually)e(specify)i(geometrical)f
(operations)g(such)g(as)h(bloating,)f(shrinking,)h(and-ing,)0
5039 y(and)c(or)n(-ing)f(to)h(be)g(performed)g(on)f(CIF)i(geometries)e
(when)h(the)o(y)f(are)i(read)f(into)f(Magic.)37 b(These)27
b(geometrical)0 5159 y(operations)h(are)h(all)g(performed)f(in)h(the)f
(CIF)i(coordinate)e(system)g(\(centimicrons\))f(so)i(there)g(is)f(no)g
(rounding)0 5280 y(or)c(loss)e(of)i(accurac)o(y)g(in)f(the)g
(operations.)30 b(Rounding)22 b(occurs)i(only)f(AFTER)h(the)f
(geometrical)g(operations,)g(at)0 5400 y(the)i(last)f(possible)f
(instant)h(before)h(entering)g(paint)f(into)g(the)g(Magic)h(database.)
1875 5649 y(\2263\226)p eop
%%Page: 4 4
4 3 bop 0 -180 a Fc(September)25 b(26,)f(2001)781 b(Magic)24
b(T)l(utorial)g(#9:)30 b(F)o(ormat)24 b(Con)l(v)o(ersion)g(for)h(CIF)h
(and)f(Calma)0 99 y Fe(4)143 b(Non-Manhattan)33 b(Geometries)0
417 y Fc(Magic)f(only)f(supports)g(Manhattan)g(features.)52
b(When)32 b(CIF)i(or)e(Calma)g(\002les)g(contain)f(non-Manhattan)g
(fea-)0 537 y(tures,)37 b(the)o(y)e(are)h(approximated)e(with)g
(Manhattan)g(ones.)62 b(The)35 b(approximations)e(occur)j(for)f(wires)g
(\(if)g(the)0 658 y(centerline)22 b(contains)f(non-Manhattan)g(se)o
(gments\))g(and)h(polygons)e(\(if)i(the)g(outline)f(contains)g
(non-Manhattan)0 778 y(se)o(gments\).)39 b(In)28 b(these)g(cases,)h
(the)f(non-Manhattan)e(se)o(gments)h(are)h(replaced)h(with)e(one)h(or)g
(more)g(horizontal)0 899 y(and)j(v)o(ertical)g(se)o(gments)f(before)h
(the)h(\002gure)f(is)g(processed.)50 b(Con)l(v)o(ersion)30
b(is)h(done)g(by)g(inserting)f(a)i(one-unit)0 1019 y(stairstep)24
b(on)h(a)g(45-de)o(gree)g(angle)g(until)f(a)i(point)e(is)g(reached)i
(where)g(a)f(horizontal)g(or)g(v)o(ertical)f(line)h(can)g(reach)0
1139 y(the)f(se)o(gment')-5 b(s)22 b(endpoint.)29 b(Some)24
b(e)o(xamples)f(are)i(illustrated)e(in)g(the)h(\002gure)h(belo)n(w:)k
(in)23 b(each)i(case,)g(the)f(\002gure)0 1260 y(on)h(the)f(left)h(is)f
(the)h(one)g(speci\002ed)g(in)f(the)h(CIF)h(\002le,)f(and)g(the)f
(\002gure)i(on)e(the)h(right)f(is)g(what)h(results)f(in)g(Magic.)877
4007 y @beginspecial 68 @llx 68 @lly 403 @urx 447 @ury
2574 @rwi @setspecial
%%BeginDocument: ../psfigures/tut9.1.ps
%
%  PostScript prolog for output from xcircuit
%  Version: 2.0
%
%  Electrical circuit (and otherwise general) drawing program
%
%  Written by Tim Edwards 8/5/93--2/25/99  (tim@bach.ece.jhu.edu)
%  The Johns Hopkins University
%
% supporting definitions --- these are the primary xcircuit types.

/XCIRCsave save def
/topmat matrix currentmatrix def

/fontslant { /slant exch def [1 0 slant 1 0 0] 
    exch findfont exch makefont dup length dict /ndict exch def
    { 1 index /FID ne { ndict 3 1 roll put } { pop pop } ifelse } forall
    ndict definefont pop} def
/cf { dup type /realtype eq {40 mul /fscale exch def} if dup /xfont exch def
   findfont fscale scalefont setfont } def
/Ss { gsave 0.67 dup scale gsave mty neg rmoveto
   glevel 1 add /glevel exch def } def
/ss { gsave 0.67 dup scale gsave mty 0.5 mul rmoveto
   glevel 1 add /glevel exch def } def
/ns { currentpoint transform   % preserve x position!
   glevel {grestore} repeat /glevel 0 def
   itransform pop currentpoint pop sub 0 rmoveto } def
/ul { showflag 1 eq { gsave 
   currentpoint topmat setmatrix 0 0 moveto 2 index stringwidth pop (_)
   false charpath flattenpath pathbbox grestore exch pop 1 index
   sub setlinewidth exch pop currentpoint 3 -1 roll add moveto 0
   rlineto stroke moveto } if } def
/ol { showflag 1 eq { gsave gsave
   currentpoint topmat setmatrix 2 index stringwidth pop 3 index
   true charpath flattenpath pathbbox grestore exch pop
   exch pop topmat setmatrix (_) true charpath pathbbox grestore
   exch pop 1 index sub setlinewidth exch pop currentpoint
   exch 4 1 roll exch sub add moveto pop 0 rlineto stroke
   moveto } if } def
/stW { gsave true charpath flattenpath pathbbox pop exch pop sub
   grestore } def
/bs { stW 0 rmoveto } def
/pspc 0 def
/qS { (aa) stW (a a) stW sub 4 div 0 rmoveto } def
/hS { qS qS } def
/textx { dup 1 add copy 0 exch { exch dup type /stringtype eq
	{stringwidth pop add}{exec} ifelse } repeat neg ns } def
/mty { 0 topmat setmatrix (A) true charpath flattenpath pathbbox exch
   pop exch sub exch pop neg grestore } def
/texty { gsave 2 copy pop exec mty } def
/tcenter { textx grestore 0.5 mul 0 rmoveto } def
/tright  { textx grestore fspc sub 0 rmoveto } def
/tmiddle { texty 0.5 mul rmoveto } def
/ttop    { texty fspc sub rmoveto } def
/tshow {{ dup type /stringtype eq {show}{exec} ifelse} repeat ns } def

/label  { gsave translate 0 0 moveto rotate /just exch def just 16 and 0 gt
	{0 1 dtransform gsave pagemat setmatrix idtransform exch grestore
	1 0 dtransform gsave pagemat setmatrix idtransform exch grestore
	dup 0 eq {pop mul 0 gt} {3 1 roll pop pop 0 lt} ifelse
	{-1 /just just dup 3 and 1 ne {3 xor} if def} {1} ifelse exch 0 lt
	{-1 /just just dup 12 and 4 ne {12 xor} if def} {1} ifelse scale } if
	/glevel 0 def /showflag 0 def /fspc pspc def
	just 1 and 0 gt {gsave just 2 and 0 gt {tright}{tcenter} ifelse}
	{fspc 0 rmoveto} ifelse
	just 4 and 0 gt {just 8 and 0 gt {ttop}{tmiddle} ifelse}
	{0 fspc rmoveto} ifelse
	/showflag 1 def tshow grestore } def
/pinlabel { hlevel 0 eq { /pspc 20 def label /pspc 0 def }
	{ pop pop pop pop {pop} repeat } ifelse } def
/pinglobal { pinlabel } def
/infolabel { pinlabel } def

/begingate { /hlevel hlevel 1 add def gsave translate 0 0 moveto dup 0 lt
	{neg 1 sub -1 1 scale} if rotate dup scale } bind def
/makeparm  {3 string cvs dup length 1 add string /tstr exch def tstr exch
	1 exch putinterval tstr 0 (v) putinterval tstr cvn} bind def
/beginparm { -1 1 {makeparm exch def} for
	dup type /arraytype eq { aload length -1 1 {makeparm exch def}
	for } if begingate } bind def
/endgate { /hlevel hlevel 1 sub def grestore } bind def

/hlevel 0 def
/tmpa [1 0 0 1 0 0] def
/gar {8 8 true tmpa {<c0 c0 00 00 0c 0c 00 00>} imagemask} bind
{8 8 true tmpa {<30 70 60 02 03 07 06 20>} imagemask} bind
{8 8 true tmpa {<0c 1e 1e 0c c0 e1 e1 c0>} imagemask} bind
{8 8 true tmpa {<0f 0f 0f 0f f0 f0 f0 f0>} imagemask} bind
{8 8 true tmpa {<3f f3 e1 e1 f3 3f 1e 1e>} imagemask} bind
{8 8 true tmpa {<df cf 8f 9f fd fc f8 f9>} imagemask} bind
{8 8 true tmpa {<ff 3f 3f ff ff f3 f3 ff>} imagemask} bind 7 array astore def
/ppaint { gsave clip tmpa dup setmatrix pathbbox neg exch neg 4 2 roll
  neg 4 -1 roll 2 copy gt {exch} if 8 div ceiling 8 mul 4 2 roll neg 2 copy
  gt {exch} if 8 div ceiling 8 mul 3 -1 roll -8 5 -1 roll
  { 3 index exch 5 exch put dup -8 3 index { 3 index
  exch 4 exch put 3 index exec } for } for pop pop pop pop grestore } bind def
/setstyles {
  currentlinewidth mul setlinewidth /style exch def
  style 1 and 0 gt not {closepath} if
  style 2 and 0 gt {currentlinewidth 4 mul dup 2 array astore 0 setdash} if 
  style 4 and 0 gt {0.5 currentlinewidth 4 mul 2 array astore 0 setdash} if 
  style dup 256 ge exch 480 lt and { gsave 1 setgray eofill grestore } if
  style 16 and 0 gt { gsave style 224 and -5 bitshift dup 7 lt
	{gar exch get ppaint} { pop eofill } ifelse grestore } if
  style 8 and 0 gt { newpath } { stroke } ifelse grestore } def
/scb { gsave setrgbcolor } bind def  /sce { grestore } bind def

/polygon { gsave /num exch def moveto num 1 sub {lineto} repeat setstyles } def
/xcarc   { gsave newpath arc setstyles } def
/elb { matrix currentmatrix 7 -1 roll 7 -1 roll translate 5 1 roll 4 -1 roll
	3 index div 1 scale } def
/ele { 0 4 1 roll 0 4 1 roll } bind def
/ellipse { gsave elb newpath ele arc setmatrix setstyles } def
/pellip  { elb ele arc setmatrix } def
/nellip  { elb ele arcn setmatrix } def
/spline  { gsave moveto curveto setstyles } def
/polyc   { {lineto} repeat } bind def
/beginpath { gsave moveto } bind def
/endpath { setstyles } bind def
/bop	 { 1 setlinecap 0 setlinejoin 6 setmiterlimit 0 setgray } def
/insertion {/PSobj save def /showpage {} def bop translate} def
/end_insert {PSobj restore} def
/setpagemat {/pagemat matrix currentmatrix def} def
/inchscale  {setpagemat 0.375 mul dup scale} def
/cmscale    {setpagemat 0.35433071 mul dup scale} def


% XCircuit output starts here.

/dot {
% -10 -10 20 20 bbox
begingate
248  1.00 0 0 6 0.00 360.00 xcarc
endgate
} def

/cifwire {
% -272 -32 400 64 bbox
begingate
0.490 0.651 0.980 scb
96 -32 beginpath
96 0 32 -90.00 90.00 arc
-240 32 1 polyc
-240 0 32 90.00 270.00 arc
96 -32 1 polyc
241  1.00 endpath
sce
1  1.00 -240 0 96 0 2 polygon
1.00 0 96 0 dot
1.00 0 -240 0 dot
96 -32 beginpath
96 0 32 -90.00 90.00 arc
-240 32 1 polyc
-240 0 32 90.00 270.00 arc
96 -32 1 polyc
1  1.00 endpath
endgate
} def

/pgsave save def bop
% 800 1038 offsets
% 32.00 8.00 gridspace
1.0000 inchscale
2.6000 setlinewidth

0.800 0.800 0.800 scb
241  1.00 672 302 800 302 1056 430 1056 558 928 686 736 654 672 590 672 302 
8 polygon
sce
0.490 0.651 0.980 scb
241  1.00 192 302 320 302 576 430 576 558 448 686 256 654 192 590 192 302 
8 polygon
sce
0.616 0.624 0.925 scb
241  1.00 672 302 864 302 864 366 928 366 928 430 1056 430 1056 558 992 558 992 
622 928 622 928 686 864 686 864 622 672 622 672 302 15 polygon
sce
0.490 0.651 0.980 scb
240  1.00 688 862 800 862 800 926 864 926 864 990 928 990 928 1054 992 1054 992 
1182 928 1182 928 1118 864 1118 864 1054 800 1054 800 990 736 990 736 926 688 
926 18 polygon
sce
1.00 45 464 1070 cifwire
0  1.00 688 862 800 862 800 926 864 926 864 990 928 990 928 1054 992 1054 992 
1182 928 1182 928 1118 864 1118 864 1054 800 1054 800 990 736 990 736 926 688 
926 18 polygon
1  1.00 720 894 768 894 768 958 832 958 832 1022 896 1022 896 1086 960 1086 960 
1150 9 polygon
1.00 0 960 1150 dot
1.00 0 720 894 dot
1  1.00 192 302 320 302 576 430 576 558 448 686 256 654 192 590 192 302 
8 polygon
0.490 0.651 0.980 scb
241  1.00 800 302 864 302 864 334 800 302 4 polygon
240  1.00 672 590 704 622 672 622 3 polygon
240  1.00 864 678 928 686 864 686 3 polygon
sce
1  1.00 672 302 864 302 864 366 928 366 928 430 1056 430 1056 558 992 558 992 
622 928 622 928 686 864 686 864 622 672 622 672 302 15 polygon
(CIF Wire) {/Helvetica 1.000 cf} 2 21 0 320 782 label
(Resulting Magic Shape) {/Helvetica 1.000 cf} 2 21 0 864 782 label
(CIF Polygon) {/Helvetica 1.000 cf} 2 21 0 352 206 label
(Resulting Magic Shape) {/Helvetica 1.000 cf} 2 21 0 864 206 label
pgsave restore showpage

XCIRCsave restore
%%EndDocument
 @endspecial 146 4512 a(The)29 b(shape)g(of)g(the)f(Magic)h(stairstep)f
(depends)g(on)g(the)h(order)g(in)f(which)h(v)o(ertices)f(appear)h(in)g
(the)f(CIF)i(or)0 4632 y(Calma)36 b(\002le.)62 b(The)36
b(stairstep)e(is)h(made)h(by)f(\002rst)g(incrementing)f(or)i
(decrementing)f(the)g(x-coordinate,)i(then)0 4753 y(incrementing)d(or)g
(decrementing)h(the)f(y-coordinate,)j(then)d(x,)j(then)e(y)-6
b(,)36 b(and)f(so)g(on.)60 b(F)o(or)35 b(e)o(xample,)h(in)e(the)0
4873 y(\002gure)j(abo)o(v)o(e,)i(the)e(polygon)f(w)o(as)h(speci\002ed)g
(in)f(counter)n(-clockwise)h(order;)43 b(if)37 b(it)f(had)h(been)g
(speci\002ed)g(in)0 4993 y(clockwise)24 b(order)h(the)g(result)f(w)o
(ould)g(ha)n(v)o(e)h(been)g(slightly)e(dif)n(ferent.)146
5159 y(An)31 b(additional)f(approximation)f(occurs)j(for)f(wires.)50
b(The)31 b(CIF)h(wire)g(\002gure)f(assumes)g(that)f(round)h(caps)0
5280 y(will)f(be)h(generated)g(at)g(each)g(end)g(of)f(the)h(wire.)48
b(In)31 b(Magic,)h(square)f(caps)g(are)g(generated)g(instead.)48
b(The)31 b(top)0 5400 y(e)o(xample)24 b(of)h(the)f(\002gure)i(abo)o(v)o
(e)e(illustrates)f(this)h(approximation.)1875 5649 y(\2264\226)p
eop
%%Page: 5 5
5 4 bop 0 -180 a Fc(Magic)24 b(T)l(utorial)g(#9:)30 b(F)o(ormat)24
b(Con)l(v)o(ersion)g(for)h(CIF)h(and)f(Calma)781 b(September)25
b(26,)g(2001)0 99 y Fe(5)143 b(Other)35 b(Pr)m(oblems)f(with)g(Reading)
g(and)i(Writing)f(CIF)0 322 y Fc(Y)-11 b(ou)38 b(may)h(ha)n(v)o(e)f
(noticed)g(that)h(when)f(you)h(wrote)f(out)g(CIF)i(for)f
Fa(tut9a)h Fc(and)e(read)i(it)e(back)h(in)f(again,)k(you)0
443 y(didn')n(t)26 b(get)h(back)g(quite)f(what)g(you)g(started)h(with.)
35 b(Although)26 b(the)g(dif)n(ferences)h(shouldn')n(t)e(cause)j(an)o
(y)e(serious)0 563 y(problems,)c(this)f(section)g(describes)h(what)g
(the)o(y)g(are)h(so)f(you')o(ll)f(kno)n(w)g(what)h(to)g(e)o(xpect.)29
b(There)23 b(are)g(three)f(areas)0 683 y(where)f(there)f(may)h(be)f
(discrepancies:)28 b(labels,)21 b(arrays,)g(and)g(contacts.)29
b(These)20 b(are)h(illustrated)e(in)h Fa(tut9b)p Fc(.)30
b(Load)0 804 y(this)25 b(cell,)g(then)h(generate)g(CIF)-8
b(,)27 b(then)e(read)h(the)g(CIF)g(back)g(in)f(again.)33
b(When)26 b(the)f(CIF)i(is)e(read)h(in,)g(you')o(ll)e(get)i(a)0
924 y(couple)c(of)h(w)o(arning)f(messages)g(because)h(Magic)f(w)o(on')n
(t)g(allo)n(w)g(the)g(CIF)i(to)e(o)o(v)o(erwrite)g(e)o(xisting)e
(cells:)29 b(it)22 b(uses)0 1045 y(ne)n(w)h(numbered)h(cells)f(instead)
g(\(this)g(is)g(why)g(you)g(should)g(normally)g(read)h(CIF)h(with)e(a)h
(\223clean)g(slate\224;)g(in)f(this)0 1165 y(case)34
b(it')-5 b(s)32 b(con)l(v)o(enient)g(to)h(ha)n(v)o(e)g(both)f(the)h
(original)g(and)g(reconstructed)g(infromation)f(present)h(at)g(the)g
(same)0 1285 y(time;)d(just)e(ignore)h(the)g(w)o(arnings\).)43
b(The)29 b(information)f(from)h(the)g(CIF)h(cell)f(appears)g(as)h(a)f
(subcell)f(named)h Fa(1)0 1406 y Fc(right)e(on)g(top)g(of)g(the)h(old)e
(contents)h(of)g Fa(tut9b)p Fc(;)j(select)d Fa(1)p Fc(,)h(mo)o(v)o(e)e
(it)h(belo)n(w)g Fa(tut9b)p Fc(,)i(and)e(e)o(xpand)g(it)g(so)g(you)g
(can)0 1526 y(compare)e(its)f(contents)g(to)g Fa(tut9b)p
Fc(.)146 1647 y(The)c(\002rst)f(problem)g(area)i(is)e(that)g(CIF)h
(normally)f(allo)n(ws)f(only)g(point)h(labels.)28 b(By)20
b(def)o(ault,)g(where)g(you)f(ha)n(v)o(e)0 1767 y(line)28
b(or)h(box)f(labels)g(in)g(Magic,)h(CIF)h(labels)e(are)h(generated)g
(at)g(the)f(center)h(of)g(the)f(Magic)g(labels.)42 b(The)28
b(label)0 1887 y Fa(in)d Fc(in)f Fa(tut9y)i Fc(is)e(an)h(e)o(xample)f
(of)h(a)g(line)f(label)h(that)f(gets)h(smashed)f(in)g(the)h(CIF)h
(processing.)k(The)24 b(command)900 2103 y Fa(:cif)h(ar)n(ealabels)g(y)
o(es)146 2319 y Fc(sets)36 b(a)g(switch)f(telling)g(Magic)h(to)f(use)h
(an)h(e)o(xtension)d(to)i(cif)g(to)f(output)g(area-labels.)65
b(This)35 b(is)h(not)f(the)0 2440 y(def)o(ault)25 b(since)f(man)o(y)g
(programs)g(that)h(tak)o(e)f(CIF)i(as)f(input)f(do)g(not)h(understand)f
(this)g(e)o(xtension.)146 2560 y(If)g(you)f(are)h(reading)f(a)g(CIF)i
(\002le)e(created)h(by)f(a)h(tool)e(other)h(than)g(Magic,)g(there)g(is)
g(an)g(additional)f(problems)0 2681 y(with)h(labels.)30
b(The)23 b(CIF)i(label)f(construct)f(\(\223)p Fa(94)g
Fd(label)h(x)g(y)g(layer)p Fc(\224\))f(has)h(an)g(optional)e
Fd(layer)i Fc(\002eld)g(that)f(indicates)0 2801 y(the)i(layer)f(to)h
(which)f(a)h(label)f(is)h(attached.)30 b(If)25 b(reading)g(a)g(CIF)h
(\002le)f(generated)g(by)f(Magic,)g(this)g(\002eld)h(is)f(al)o(w)o(ays)
0 2921 y(present)j(and)h(so)f(a)h(label')-5 b(s)27 b(layer)g(is)g
(unambiguous.)37 b(Ho)n(we)n(v)o(er)l(,)27 b(if)h(the)f(\002eld)h(is)f
(absent,)g(Magic)h(must)e(decide)0 3042 y(which)g(layer)g(to)g(use.)35
b(It)27 b(does)f(this)f(by)h(looking)f(to)h(see)h(what)f(Magic)g
(layers)g(lie)g(beneath)g(the)g(label)g(after)h(the)0
3162 y(CIF)h(has)e(been)h(read)g(in.)35 b(When)27 b(there)g(are)g(se)n
(v)o(eral)f(layers,)g(it)g(chooses)g(the)h(one)f(appearing)h(LA)-11
b(TEST)26 b(in)g(the)0 3283 y Fa(types)i Fc(section)e(of)h(the)g
(technology)f(\002le.)39 b(Usually)-6 b(,)26 b(it')-5
b(s)26 b(possible)g(to)h(ensure)g(that)g(the)g(right)f(layer)i(is)e
(used)h(by)0 3403 y(placing)d(signal)f(layers)h(\(such)g(as)g(metal,)g
(dif)n(fusion,)f(and)h(poly\))f(later)i(in)e(the)h(types)g(section)f
(than)h(layers)g(such)0 3523 y(as)k(pwell)f(or)h(nplus.)38
b(Ho)n(we)n(v)o(er)l(,)27 b(sometimes)f(Magic)i(will)e(still)h(pick)g
(the)h(wrong)f(layer)l(,)i(and)e(it)g(will)g(be)h(up)f(to)0
3644 y(you)d(to)h(mo)o(v)o(e)e(the)i(label)f(to)h(the)f(right)g(layer)h
(yourself.)146 3764 y(The)20 b(second)f(problem)g(is)g(with)g(arrays.)
30 b(CIF)20 b(has)g(no)f(standard)g(array)i(construct,)f(so)f(when)g
(Magic)h(outputs)0 3884 y(arrays)34 b(it)f(does)h(it)f(as)h(a)g
(collection)f(of)g(cell)h(instances.)57 b(When)34 b(the)f(CIF)i(\002le)
f(is)f(read)i(back)f(in,)h(each)f(array)0 4005 y(element)d(comes)h
(back)g(as)f(a)i(separate)f(subcell.)51 b(The)32 b(array)g(of)g
Fa(tut9y)g Fc(cells)g(is)f(an)h(e)o(xample)f(of)h(this.)50
b(Most)0 4125 y(designs)26 b(only)h(ha)n(v)o(e)g(a)h(fe)n(w)f(arrays)h
(that)f(are)h(lar)n(ge)g(enough)f(to)g(matter;)g(where)h(this)f(is)g
(the)g(case,)h(you)f(should)0 4246 y(go)d(back)g(after)h(reading)f(the)
g(CIF)i(and)e(replace)h(the)f(multiple)e(instances)i(with)f(a)i(single)
e(array)-6 b(.)31 b(Calma)24 b(format)0 4366 y(does)h(ha)n(v)o(e)f(an)h
(array)h(construct,)e(so)g(it)g(doesn')n(t)h(ha)n(v)o(e)f(this)g
(problem.)146 4486 y(The)i(third)e(discrepanc)o(y)h(is)g(that)g(where)h
(there)f(are)h(lar)n(ge)g(contact)f(areas,)h(when)f(CIF)i(is)e(read)g
(and)h(written)0 4607 y(the)h(area)h(of)f(the)g(contact)g(may)f(be)i
(reduced)f(slightly)-6 b(.)35 b(This)26 b(happened)h(to)g(the)g(lar)n
(ge)g(poly)g(contact)f(in)h Fa(tut9b)p Fc(.)0 4727 y(The)c(shrink)f
(doesn')n(t)h(reduce)g(the)g(ef)n(fecti)n(v)o(e)f(area)i(of)g(the)e
(contact;)i(it)e(just)g(reduces)h(the)g(area)h(dra)o(wn)f(in)g(Magic.)0
4847 y(T)-8 b(o)25 b(see)g(what')-5 b(s)24 b(happening)g(here,)h(place)
g(the)g(box)f(around)h Fa(tut9b)h Fc(and)e Fa(1)p Fc(,)h(e)o(xpand)f(e)
n(v)o(erything,)f(then)h(type)900 5064 y Fa(:cif)h(see)g(CCP)146
5280 y Fc(This)d(causes)h(feedback)h(to)e(be)h(displayed)e(sho)n(wing)g
(CIF)j(layer)f(\223CCP\224)i(\(contact)e(cut)f(to)h(poly\).)29
b(Y)-11 b(ou)22 b(may)0 5400 y(ha)n(v)o(e)j(to)f(zoom)h(in)f(a)i(bit)e
(to)h(distinguish)d(the)j(indi)n(vidual)e(via)i(holes.)30
b(Magic)25 b(generates)g(lots)f(of)h(small)f(contact)1875
5649 y(\2265\226)p eop
%%Page: 6 6
6 5 bop 0 -180 a Fc(September)25 b(26,)f(2001)781 b(Magic)24
b(T)l(utorial)g(#9:)30 b(F)o(ormat)24 b(Con)l(v)o(ersion)g(for)h(CIF)h
(and)f(Calma)0 68 y(vias)f(o)o(v)o(er)f(the)i(area)g(of)f(the)g
(contact,)h(and)f(if)g(contacts)g(aren')n(t)h(e)o(xact)f(multiples)e
(of)j(the)f(hole)g(size)g(and)h(spacing)0 188 y(then)c(e)o(xtra)h
(space)g(is)f(left)h(around)g(the)f(edges.)30 b(When)22
b(the)f(CIF)i(is)f(read)g(back)g(in,)g(this)f(e)o(xtra)g(space)h(isn')n
(t)f(turned)0 309 y(back)31 b(into)e(contact.)47 b(The)31
b(circuit)f(that)g(is)g(read)g(in)g(is)g(functionally)f(identical)h(to)
g(the)g(original)g(circuit,)h(e)n(v)o(en)0 429 y(though)24
b(the)g(Magic)h(contact)f(appears)i(slightly)c(smaller)-5
b(.)146 549 y(There)24 b(is)f(an)g(additional)f(problem)g(with)h
(generating)f(CIF)j(ha)n(ving)d(to)h(do)g(with)f(the)h(cell)h
(hierarchy)-6 b(.)29 b(When)0 670 y(Magic)h(generates)h(CIF)-8
b(,)32 b(it)e(performs)g(geometric)g(operations)g(such)h(as)f(\223gro)n
(w\224)h(and)f(\223shrink\224on)g(the)h(mask)0 790 y(layers.)63
b(Some)36 b(of)g(these)f(operations)g(are)h(not)f(guaranteed)h(to)g(w)o
(ork)f(perfectly)h(on)f(hierarchical)h(designs.)0 911
y(Magic)20 b(detects)h(when)g(there)g(are)h(problems)d(and)i(creates)h
(feedback)f(areas)h(to)e(mark)h(the)g(trouble)f(spots.)28
b(When)0 1031 y(you)h(write)g(CIF)-8 b(,)30 b(Magic)f(will)f(w)o(arn)i
(you)e(that)h(there)h(were)f(troubles.)43 b(These)30
b(should)e(almost)g(ne)n(v)o(er)g(happen)0 1151 y(if)e(you)f(generate)h
(CIF)h(from)f(designs)f(that)g(don')n(t)g(ha)n(v)o(e)h(an)o(y)f
(design-rule)g(errors.)34 b(If)27 b(the)o(y)e(do)g(occur)l(,)h(you)g
(can)0 1272 y(get)f(around)f(them)g(by)h(writing)f(cif)h(with)f(the)g
(follo)n(wing)f(command)900 1500 y Fa(:cif)i(\003at)g
Fd(\002leName)146 1728 y Fc(This)31 b(command)g(creates)h(an)g
(internal)f(v)o(ersion)f(of)i(the)f(design)g(with)g(hierarchy)g(remo)o
(v)o(ed,)h(before)h(out-)0 1849 y(puting)22 b(CIF)i(as)g(in)f
Fa(cif)g(write)p Fc(.)30 b(An)24 b(alternati)n(v)o(e)d(approach)j(that)
f(does)g(not)f(require)i(\003attening)e(is)h(to)g(modify)f(the)0
1969 y(technology)28 b(\002le)h(in)g(use.)43 b(Read)30
b(\223Magic)f(Maintainers)f(Manual)g(#2:)39 b(The)29
b(T)-7 b(echnology)28 b(File\224,)i(if)f(you)f(w)o(ant)0
2090 y(to)c(try)h(this)f(approach.)1875 5649 y(\2266\226)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
